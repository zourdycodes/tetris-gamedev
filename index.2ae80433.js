!function(){const t=document.getElementById("tetris").getContext("2d"),o=document.getElementById("score"),i=COLUMN=10,e=squareSize=20,n="WHITE";function s(o,i,r){t.fillStyle=r,t.fillRect(o*e,i*e,e,e),t.strokeStyle="BLACK",t.strokeRect(o*e,i*e,e,e)}let h=[];for(r=0;r<20;r++)for(h[r]=[],c=0;c<i;c++)h[r][c]=n;function l(){for(r=0;r<20;r++)for(c=0;c<i;c++)s(c,r,h[r][c])}l();const f=[[Z,"red"],[S,"green"],[T,"yellow"],[O,"blue"],[L,"purple"],[I,"cyan"],[J,"orange"]];function a(){let t=randomN=Math.floor(Math.random()*f.length);return new u(f[t][0],f[t][1])}let m=a();function u(t,o){this.tetromino=t,this.color=o,this.tetrominoN=0,this.activeTetromino=this.tetromino[this.tetrominoN],this.x=3,this.y=-2}u.prototype.fill=function(t){for(r=0;r<this.activeTetromino.length;r++)for(c=0;c<this.activeTetromino.length;c++)this.activeTetromino[r][c]&&s(this.x+c,this.y+r,t)},u.prototype.draw=function(){this.fill(this.color)},u.prototype.unDraw=function(){this.fill(n)},u.prototype.moveDown=function(){this.collision(0,1,this.activeTetromino)?(this.lock(),m=a()):(this.unDraw(),this.y++,this.draw())},u.prototype.moveRight=function(){this.collision(1,0,this.activeTetromino)||(this.unDraw(),this.x++,this.draw())},u.prototype.moveLeft=function(){this.collision(-1,0,this.activeTetromino)||(this.unDraw(),this.x--,this.draw())},u.prototype.rotate=function(){let t=this.tetromino[(this.tetrominoN+1)%this.tetromino.length],o=0;this.collision(0,0,t)&&(o=this.x>i/2?-1:1),this.collision(o,0,t)||(this.unDraw(),this.x+=o,this.tetrominoN=(this.tetrominoN+1)%this.tetromino.length,this.activeTetromino=this.tetromino[this.tetrominoN],this.draw())};let w=0;u.prototype.lock=function(){for(r=0;r<this.activeTetromino.length;r++)for(c=0;c<this.activeTetromino.length;c++)if(this.activeTetromino[r][c]){if(this.y+r<0){alert("Game Over"),p=!0;break}h[this.y+r][this.x+c]=this.color}for(r=0;r<20;r++){let t=!0;for(c=0;c<i;c++)t=t&&h[r][c]!=n;if(t){for(y=r;y>1;y--)for(c=0;c<i;c++)h[y][c]=h[y-1][c];for(c=0;c<i;c++)h[0][c]=n;w+=10}}l(),o.innerHTML=w},u.prototype.collision=function(t,o,e){for(r=0;r<e.length;r++)for(c=0;c<e.length;c++){if(!e[r][c])continue;let s=this.x+c+t,l=this.y+r+o;if(s<0||s>=i||l>=20)return!0;if(!(l<0)&&h[l][s]!=n)return!0}return!1},document.addEventListener("keydown",(function(t){37==t.keyCode?(m.moveLeft(),d=Date.now()):38==t.keyCode?(m.rotate(),d=Date.now()):39==t.keyCode?(m.moveRight(),d=Date.now()):40==t.keyCode&&m.moveDown()}));let d=Date.now(),p=!1;!function t(){Date.now()-d>1e3&&(m.moveDown(),d=Date.now()),p||requestAnimationFrame(t)}()}();
//# sourceMappingURL=index.2ae80433.js.map
